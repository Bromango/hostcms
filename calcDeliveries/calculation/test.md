 
 ## Отрабатывается при первичной загрузке сайта старницы.

 * +поместить в шапку корневого шаблона идентификацию положения пользователя
 * +В конфиге поставить галочку определять название города и региона из обновленной БД по почтовому индексу и название Таблицы
 * +В конфиге сделать у служб доставки активность 
 * +Сделать в корне метод который будет писать в сессию данные из обновленной бд по почтовому индексу:
    * +Если указанна галочка в конфиге получить по почтовому индексу город / регион
    * +Записать название региона / города в Сессию /куки
    * +Записать идентификаторы города и регоина в сессию и куки
    * +Записать Идентификаторы активных служб доставки (указываются в config.php) в сессию и куки

## Отрабатывает при загрузке страницы товара
 * +В ТДС отдаем в XML Определенный город / регион / почтовый индекс из сессии
 * +Если есть почтовый индекс или идентификато службы доставки - В ТДС определяем стоимость доставки в город пользователя 
 * +Записываем стоимость доставки в сессию 
 * +Обязательно пишем в сессию расчитанную стоимость доставки, чтобы потом её использовать в обработке платежной системы
 * +Отдаем стоимость доставки в XML 
 * Обрабатываем XSLT шаблон выводим в HTML 
### На HTML страницы товара:
 * +Выводим статичную стоимость доставки в город пользователя
 * +Заменяем статичную стоимость доставки - новой определенной стоимостью 
 * +Если доставки не выведены, просто выводим воможность выбрать 
 * +выводим в доставке кнопку положить в корзину, кнопка активна только если выбранны параметры товара, если не выбранны параметры - сообщение с просьбой выбрать параметры
 * +Если пользователь выбрал другой регион доставки методом AJAX:
    * +пишем новый регион в сессию и куки
    * +определяем для региона стоимость доставки 
    * +пишем новый расчет в стоимость доставки в сессию и куки
    * +Отображаем пользователю
 * +При добавлении товара в таблице доставок, пусть в сессии отмечается выбранный тип доставки, позже в корзине пусть автоматически выбирается

## Отрабатывет при загрузке страницы корзины магазина
 * Если город и почтовый индекс есть, а стоимости доставок нет, 
    * определяем стоимости доставок 
    * пишем в сессию 
    * Обязательно пишем в сессию расчитанную стоимость доставки, чтобы потом её использовать в обработке платежной системы
    * отдаем все данные из сессии в XML
 * Если и город есть и стоимости доставок - пишем все из сессии в XML 
 * Обрабатываем XSLT шаблон выводим в HTML
### На HTML страницы корзины магазина 
* Выводим статичную стоимость доставки в город пользователя
* Заменяем статичную стоимость доставки - новой определенной стоимостью из сессии
* Если выбран новый регион доставки через AJAX:
    * Расчитвыем новую стоимость достави и заполняем её
    * Получаем новый почтовый индекс и заполняем его
* Если указан новый почтовый индекс и первые 3 цифры отличаются от первых 3 у автоматически подгруженного, то через AJAX 
    * Сначала определяем регион и расчитываем доставку
    * пишем в сессию 
    * выводим пользователю 



# Интегация
 * Копирование модуля
 * Интеграция SQL таблицы в БД
 * Внесение правок в файл конфигурации
 * Корневой шаблон (получение данных пользователя)
 * Правки для расчета доставки на странице карты товара 
    * Правки Теле ТДС
    * Правки в настройках ТДС
    * Правки в XSL шаблоне товара
    * Правки в XSL шаблоне загрузки таблицы доствок
    * Правки в JS файле прикрепленном к странице товара
 * Правки для расчета доставки на старнице корзины товара 
    * Правки для ТДС корзины товаров (оформление заказа) p.s. в примере реализован процес оформления заказа на одной старнице (в один шаг)
        * в блоке default 
    * Скопировать /ajax/sdek-widget/
    * Скопировать /ajax/boxberry-widget/
    * Желательно страницу корзины прикрепить на отдельный шаблон (если этого еще не сделанно), так как используются js и css файлы которые более нигде не использыются кроме этой страницы. 
    * 
    * Чтобы в форме автоматически заполнялись данные из кук 
        * Сохранить пользовательские данные в куках 
        * Тянуть пользовательские данные из кук 

